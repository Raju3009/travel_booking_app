{% extends 'base.html' %}
{% block content %}
<h1 class="h4 mb-3">Available Travel Options</h1>

<form method="get" class="row g-2 mb-3">
  <div class="col-6 col-md-2">
    <select class="form-select" name="type">
  <option value="">Type</option>
  <option value="Flight" {% if filters.type == "Flight" %}selected{% endif %}>Flight</option>
  <option value="Train" {% if filters.type == "Train" %}selected{% endif %}>Train</option>
  <option value="Bus" {% if filters.type == "Bus" %}selected{% endif %}>Bus</option>
</select>

  </div>
  <div class="col-6 col-md-3"><input class="form-control" type="text" name="source" placeholder="Source" value="{{ filters.source }}"></div>
  <div class="col-6 col-md-3"><input class="form-control" type="text" name="destination" placeholder="Destination" value="{{ filters.destination }}"></div>
  <div class="col-6 col-md-2"><input class="form-control" type="date" name="date" value="{{ filters.date }}"></div>
  <div class="col-12 col-md-2 d-grid"><button class="btn btn-primary">Filter</button></div>
</form>

<div class="row g-4">
  {% for t in travels %}
  <div class="col-12 col-md-6 col-lg-4">
    <div class="card h-100 border-0 shadow-sm rounded-4">
      <div class="card-body d-flex flex-column">
        <h5 class="card-title text-primary">{{ t.source }} → {{ t.destination }}</h5>
        <p class="card-text"><span class="badge bg-info">{{ t.type }}</span></p>
        <p class="mb-1"><strong>Date:</strong> {{ t.date_time|date:"M d, Y H:i" }}</p>
        <p class="mb-1"><strong>Price:</strong> ₹{{ t.price }}</p>
        <p class="mb-3"><strong>Seats:</strong> {{ t.available_seats }}</p>
        <a class="btn btn-primary mt-auto w-100" href="{% url 'travel_detail' t.id %}">Book Now</a>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12">
    <div class="alert alert-info">No travel options found.</div>
  </div>
  {% endfor %}
</div>

{% endblock %}
